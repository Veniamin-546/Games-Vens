<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --main-color: #00f2ff; --star-color: #ffaa00; --bg-color: #0a0a0c; }
        body { background: var(--bg-color); color: white; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; display: flex; flex-direction: column; align-items: center; height: 100vh; }
        
        #game-container { text-align: center; width: 90%; max-width: 400px; padding-top: 20px; }
        
        .balance-card { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 20px; border: 1px solid rgba(0,242,255,0.2); margin-bottom: 20px; }
        .amount { font-size: 42px; font-weight: 800; color: var(--main-color); text-shadow: 0 0 15px rgba(0,242,255,0.4); }
        
        .main-btn { width: 180px; height: 180px; border-radius: 50%; border: none; background: radial-gradient(circle, #1a1a1a 0%, #000 100%); box-shadow: 0 0 25px rgba(0,242,255,0.15); cursor: pointer; position: relative; transition: 0.1s; display: flex; align-items: center; justify-content: center; font-size: 65px; margin: 0 auto; user-select: none; -webkit-tap-highlight-color: transparent; }
        .main-btn:active { transform: scale(0.9); }

        .shop-container { margin-top: 20px; width: 100%; display: grid; gap: 8px; }
        .up-btn { background: #161618; border: 1px solid #333; color: white; padding: 12px 15px; border-radius: 14px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .up-btn b { color: var(--main-color); }
        .star-btn { border-color: var(--star-color); color: var(--star-color); font-weight: bold; }

        .level-badge { background: var(--main-color); color: black; padding: 2px 10px; border-radius: 10px; font-weight: bold; font-size: 12px; margin-bottom: 5px; display: inline-block; }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="level-badge" id="lvl-tag">–£–†–û–í–ï–ù–¨ 1</div>
        <div class="balance-card">
            <div class="amount" id="coins">0</div>
            <div id="income-text" style="color: #888; font-size: 14px;">+1 –∑–∞ –∫–ª–∏–∫</div>
        </div>

        <button class="main-btn" id="rocket" onclick="mine(event)">üöÄ</button>

        <div class="shop-container">
            <div class="up-btn" onclick="upgrade()">
                <span>–£–ª—É—á—à–∏—Ç—å –¥–≤–∏–∂–æ–∫</span>
                <b id="price-tag">50 üí∞</b>
            </div>

            <div class="up-btn star-btn" onclick="buyItem('autoclicker')">
                <span>ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (10 –º–∏–Ω)</span>
                <span>100 ‚≠ê</span>
            </div>
            <div class="up-btn star-btn" onclick="buyItem('booster')">
                <span>üî• –ë—É—Å—Ç –ø—Ä–∏–±—ã–ª–∏ x2</span>
                <span>250 ‚≠ê</span>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let coins = Number(localStorage.getItem('coins')) || 0;
        let power = Number(localStorage.getItem('power')) || 1;
        let price = Number(localStorage.getItem('price')) || 50;
        let multiplier = Number(localStorage.getItem('multiplier')) || 1;

        function updateUI() {
            document.getElementById('coins').innerText = Math.floor(coins);
            document.getElementById('income-text').innerText = `+${power * multiplier} –∑–∞ –∫–ª–∏–∫`;
            document.getElementById('price-tag').innerText = `${price} üí∞`;
            
            // –°–º–µ–Ω–∞ —Ä–∞–∫–µ—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –ø—Ä–æ–∫–∞—á–∫–∏ (power)
            let rocket = document.getElementById('rocket');
            let lvlTag = document.getElementById('lvl-tag');
            if (power >= 50) { rocket.innerText = 'üõ∏'; lvlTag.innerText = '–£–†–û–í–ï–ù–¨: –ì–ê–õ–ê–ö–¢–ò–ö–ê'; }
            else if (power >= 25) { rocket.innerText = 'üõ∞Ô∏è'; lvlTag.innerText = '–£–†–û–í–ï–ù–¨: –û–†–ë–ò–¢–ê'; }
            else if (power >= 10) { rocket.innerText = '‚úàÔ∏è'; lvlTag.innerText = '–£–†–û–í–ï–ù–¨: –ù–ï–ë–û'; }
            
            localStorage.setItem('coins', coins);
            localStorage.setItem('power', power);
            localStorage.setItem('price', price);
        }

        function mine(e) {
            coins += (power * multiplier);
            tg.HapticFeedback.impactOccurred('medium');
            
            // –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —á–∏—Å–ª–æ +1
            const plus = document.createElement('div');
            plus.innerText = `+${power * multiplier}`;
            plus.style.cssText = `position:absolute; left:${e.clientX}px; top:${e.clientY}px; color:var(--main-color); font-weight:bold; pointer-events:none; animation: fadeUp 0.8s forwards;`;
            document.body.appendChild(plus);
            setTimeout(() => plus.remove(), 800);
            
            updateUI();
        }

        function upgrade() {
            if (coins >= price) {
                coins -= price;
                power += 1;
                price = Math.floor(price * 1.6);
                tg.HapticFeedback.notificationOccurred('success');
                updateUI();
            } else {
                tg.HapticFeedback.notificationOccurred('error');
            }
        }

        function buyItem(id) {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ RoboChat
            tg.sendData(JSON.stringify({ action: "buy", item: id }));
            tg.HapticFeedback.impactOccurred('heavy');
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö —Ü–∏—Ñ—Ä
        const style = document.createElement('style');
        style.innerHTML = `@keyframes fadeUp { to { transform: translateY(-50px); opacity: 0; } }`;
        document.head.appendChild(style);

        updateUI();
    </script>
</body>
</html>
