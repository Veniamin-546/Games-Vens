<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --main-color: #00f2ff; --star-color: #ffaa00; --bg-color: #0a0a0c; }
        body { background: var(--bg-color); color: white; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        /* –®–∞–ø–∫–∞ —Å –±–∞–ª–∞–Ω—Å–æ–º */
        .header { padding: 20px; text-align: center; flex-shrink: 0; }
        .amount { font-size: 42px; font-weight: 800; color: var(--main-color); text-shadow: 0 0 15px rgba(0,242,255,0.4); }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ */
        .tab-content { flex-grow: 1; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px; overflow-y: auto; }
        .tab-content.active { display: flex; }

        /* –í–∫–ª–∞–¥–∫–∞ –ò–ì–†–ê */
        .main-btn { width: 220px; height: 220px; border-radius: 50%; border: none; background: radial-gradient(circle, #1a1a1a 0%, #000 100%); box-shadow: 0 0 30px rgba(0,242,255,0.15); cursor: pointer; font-size: 80px; transition: 0.1s; user-select: none; -webkit-tap-highlight-color: transparent; }
        .main-btn:active { transform: scale(0.9); }

        /* –í–∫–ª–∞–¥–∫–∞ –ú–ê–ì–ê–ó–ò–ù */
        .shop-list { width: 100%; display: grid; gap: 12px; }
        .card { background: #161618; border: 1px solid #333; padding: 15px; border-radius: 18px; display: flex; justify-content: space-between; align-items: center; }
        .card.star { border-color: var(--star-color); }
        .buy-btn { background: var(--main-color); color: black; border: none; padding: 8px 15px; border-radius: 10px; font-weight: bold; }
        .buy-btn.star { background: var(--star-color); }

        /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav-bar { background: #111; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #222; flex-shrink: 0; }
        .nav-item { color: #555; text-decoration: none; font-size: 12px; display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer; }
        .nav-item.active { color: var(--main-color); }
        .nav-icon { font-size: 20px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="amount" id="coins">0</div>
        <div id="income-text" style="color: #888; font-size: 14px;">+1 –∑–∞ –∫–ª–∏–∫</div>
    </div>

    <div id="game-tab" class="tab-content active">
        <div style="margin-bottom: 20px; font-weight: bold; color: var(--main-color);" id="lvl-tag">–£–†–û–í–ï–ù–¨ 1</div>
        <button class="main-btn" id="rocket" onclick="mine(event)">üöÄ</button>
        <p style="color: #444; margin-top: 20px;">–ö–ª–∏–∫–∞–π –Ω–∞ —Ä–∞–∫–µ—Ç—É, —á—Ç–æ–±—ã –¥–æ–±—ã–≤–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—é</p>
    </div>

    <div id="shop-tab" class="tab-content">
        <h2 style="margin-top: 0;">–ú–∞–≥–∞–∑–∏–Ω</h2>
        <div class="shop-list">
            <div class="card">
                <div>
                    <div style="font-weight: bold;">–£–ª—É—á—à–∏—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—å</div>
                    <div style="font-size: 12px; color: #888;">+1 –∫ —Å–∏–ª–µ –∫–ª–∏–∫–∞</div>
                </div>
                <button class="buy-btn" onclick="upgrade()" id="price-tag">50 üí∞</button>
            </div>

            <div class="card star">
                <div>
                    <div style="font-weight: bold; color: var(--star-color);">ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä</div>
                    <div style="font-size: 12px; color: #888;">–†–∞–±–æ—Ç–∞–µ—Ç 10 –º–∏–Ω—É—Ç</div>
                </div>
                <button class="buy-btn star" onclick="buyItem('autoclicker')">100 ‚≠ê</button>
            </div>

            <div class="card star">
                <div>
                    <div style="font-weight: bold; color: var(--star-color);">üî• –°—É–ø–µ—Ä-–ë—É—Å—Ç</div>
                    <div style="font-size: 12px; color: #888;">–£–¥–≤–∞–∏–≤–∞–µ—Ç –≤—Å—ë –Ω–∞–≤—Å–µ–≥–¥–∞</div>
                </div>
                <button class="buy-btn star" onclick="buyItem('booster')">250 ‚≠ê</button>
            </div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="openTab('game', this)">
            <span class="nav-icon">üöÄ</span>
            <span>–ò–≥—Ä–∞</span>
        </div>
        <div class="nav-item" onclick="openTab('shop', this)">
            <span class="nav-icon">‚≠ê</span>
            <span>–ú–∞–≥–∞–∑–∏–Ω</span>
        </div>
        <div class="nav-item" onclick="tg.showAlert('–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!')">
            <span class="nav-icon">üèÜ</span>
            <span>–¢–æ–ø</span>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let coins = Number(localStorage.getItem('coins')) || 0;
        let power = Number(localStorage.getItem('power')) || 1;
        let price = Number(localStorage.getItem('price')) || 50;
        let multiplier = Number(localStorage.getItem('multiplier')) || 1;

        function openTab(tabName, el) {
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            document.getElementById(tabName + '-tab').classList.add('active');
            el.classList.add('active');
            tg.HapticFeedback.impactOccurred('light');
        }

        function updateUI() {
            document.getElementById('coins').innerText = Math.floor(coins);
            document.getElementById('income-text').innerText = `–ü—Ä–∏–±—ã–ª—å: +${power * multiplier}`;
            document.getElementById('price-tag').innerText = `${price} üí∞`;
            
            let rocket = document.getElementById('rocket');
            if (power >= 50) rocket.innerText = 'üõ∏';
            else if (power >= 20) rocket.innerText = 'üõ∞Ô∏è';
            
            localStorage.setItem('coins', coins);
            localStorage.setItem('power', power);
            localStorage.setItem('price', price);
        }

        function mine(e) {
            coins += (power * multiplier);
            tg.HapticFeedback.impactOccurred('medium');
            updateUI();
        }

        function upgrade() {
            if (coins >= price) {
                coins -= price;
                power += 1;
                price = Math.floor(price * 1.6);
                updateUI();
                tg.HapticFeedback.notificationOccurred('success');
            } else {
                tg.showPopup({ message: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!" });
            }
        }

        function buyItem(id) {
            // –°–∏–≥–Ω–∞–ª –±–æ—Ç—É –Ω–∞ –æ–ø–ª–∞—Ç—É
            tg.sendData(JSON.stringify({ action: "buy", item: id }));
        }

        updateUI();
    </script>
</body>
</html>
