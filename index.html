<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --main-color: #00f2ff; --bg-color: #0a0a0c; }
        body { background: var(--bg-color); color: white; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        
        #game-container { text-align: center; width: 90%; max-width: 400px; }
        
        .balance-card { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 24px; border: 1px solid rgba(0,242,255,0.2); margin-bottom: 30px; }
        .amount { font-size: 48px; font-weight: 800; color: var(--main-color); text-shadow: 0 0 20px rgba(0,242,255,0.4); }
        
        .main-btn { width: 200px; height: 200px; border-radius: 50%; border: none; background: radial-gradient(circle, #1a1a1a 0%, #000 100%); box-shadow: 0 0 30px rgba(0,242,255,0.2); cursor: pointer; position: relative; transition: 0.1s; display: flex; align-items: center; justify-content: center; font-size: 60px; margin: 0 auto; }
        .main-btn:active { transform: scale(0.92); box-shadow: 0 0 10px var(--main-color); }
        
        .ufo-bonus { position: absolute; font-size: 40px; cursor: pointer; animation: fly 4s linear; z-index: 100; }
        @keyframes fly { from { left: -50px; top: 20%; } to { left: 110%; top: 50%; } }
        
        .upgrade-panel { margin-top: 30px; display: grid; gap: 10px; }
        .up-btn { background: #1a1a1a; border: 1px solid #333; color: #888; padding: 12px; border-radius: 12px; font-size: 14px; text-align: left; display: flex; justify-content: space-between; }
        .up-btn.active { border-color: var(--main-color); color: white; }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="balance-card">
            <div style="font-size: 14px; color: #888; text-transform: uppercase;">–ö—Ä–∏–ø—Ç–æ-–≠–Ω–µ—Ä–≥–∏—è</div>
            <div class="amount" id="coins">0</div>
            <div id="income-text" style="color: #00ff88; font-size: 14px;">+1 / –∫–ª–∏–∫</div>
        </div>

        <button class="main-btn" onclick="mine(event)">üöÄ</button>

        <div class="upgrade-panel">
            <button class="up-btn active" onclick="upgrade()" id="up-btn">
                <span>–£–ª—É—á—à–∏—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—å</span>
                <b id="price-tag">50 üí∞</b>
            </button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.backgroundColor = '#0a0a0c';

        let coins = Number(localStorage.getItem('coins')) || 0;
        let power = Number(localStorage.getItem('power')) || 1;
        let price = Number(localStorage.getItem('price')) || 50;

        function updateUI() {
            document.getElementById('coins').innerText = Math.floor(coins);
            document.getElementById('income-text').innerText = `+${power} / –∫–ª–∏–∫`;
            document.getElementById('price-tag').innerText = `${price} üí∞`;
            
            localStorage.setItem('coins', coins);
            localStorage.setItem('power', power);
            localStorage.setItem('price', price);
        }

        function mine(e) {
            coins += power;
            tg.HapticFeedback.impactOccurred('medium');
            
            // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞
            const clickAnim = document.createElement('div');
            clickAnim.innerText = `+${power}`;
            clickAnim.style.position = 'absolute';
            clickAnim.style.left = `${e.clientX}px`;
            clickAnim.style.top = `${e.clientY}px`;
            clickAnim.style.color = '#00f2ff';
            clickAnim.style.fontWeight = 'bold';
            clickAnim.style.pointerEvents = 'none';
            document.body.appendChild(clickAnim);
            
            setTimeout(() => clickAnim.remove(), 800);
            updateUI();
        }

        function upgrade() {
            if (coins >= price) {
                coins -= price;
                power += 1;
                price = Math.floor(price * 1.8);
                tg.HapticFeedback.notificationOccurred('success');
                updateUI();
            }
        }

        // –ü–æ—è–≤–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–Ω–æ–≥–æ –ù–õ–û
        setInterval(() => {
            if (Math.random() > 0.7) {
                const ufo = document.createElement('div');
                ufo.className = 'ufo-bonus';
                ufo.innerText = 'üõ∏';
                ufo.onclick = () => {
                    coins += (power * 50);
                    ufo.remove();
                    tg.HapticFeedback.notificationOccurred('warning');
                    updateUI();
                };
                document.body.appendChild(ufo);
                setTimeout(() => ufo.remove(), 4000);
            }
        }, 10000);

        updateUI();
    </script>
</body>
</html>
